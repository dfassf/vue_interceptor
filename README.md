# Fetch Interceptor

## 프로젝트 설명

이 프로젝트는 액세스 토큰을 헤더에 담아 Fetch 요청을 보내고, 응답이 401(Unauthorized)일 시 토큰 재발급 로직 수행 후 재요청 하는 인터셉터 예시입니다.

## 프로젝트 설정

### 프론트엔드 (Vue.js)

1. **프론트엔드 디렉토리로 이동:**
   ```bash
   cd fe
   ```

2. **의존성 설치:**
   ```bash
   npm install
   ```

3. **개발 모드에서 서버 시작:**
   ```bash
   npm run dev
   ```

### 백엔드 (NestJS)

1. **백엔드 디렉토리로 이동:**
   ```bash
   cd be
   ```

2. **의존성 설치:**
   ```bash
   npm install
   ```

3. **개발 모드에서 서버 시작:**
   ```bash
   npm run start:dev
   ```

4. **프로덕션 모드에서 서버 시작:**
   ```bash
   npm run start:prod
   ```

## 환경 변수 설정

이 프로젝트는 환경 변수를 사용하여 서버 URL을 설정합니다. `.env` 파일을 프로젝트 루트에 생성하고 다음과 같이 설정합니다:

VITE_SERVER_URL=http://localhost:3000


여기서 `http://localhost:3000`은 백엔드 서버의 URL입니다. 필요에 따라 변경할 수 있습니다.

## Axios 인터셉터

프론트엔드에서는 Fetch함수를 사용한 인터셉터를 사용하여 요청과 응답을 처리합니다. `fe/src/interceptor.js` 파일에서 인터셉터의 로직을 확인할 수 있습니다. 이 인터셉터는 다음과 같은 기능을 제공합니다:

- Axios와 비슷하게 사용할 수 있습니다.
- 요청 시 토큰을 자동으로 추가합니다.
- 401 응답 시 토큰을 갱신하고 원래 요청을 재시도합니다.

## 테스트 실행

### 테스트

프론트엔드의 각 버튼은 로컬 스토리지에 액세스 토큰 저장, 일반 요청 처리, 401오류 시, 그 외의 오류 응답 반환의 기능을 합니다.

## 배포

프로젝트를 배포할 준비가 되면, NestJS의 [배포 문서](https://docs.nestjs.com/deployment)를 참조하여 최적화된 배포 방법을 확인하세요.